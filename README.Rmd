---
title: typetracer
output: md_document
---

<!-- badges: start -->
[![R-CMD-check](https://github.com/mpadge/typetracer/workflows/R-CMD-check/badge.svg)](https://github.com/mpadge/typetracer/actions)
[![codecov](https://codecov.io/gh/mpadge/typetracer/branch/main/graph/badge.svg)](https://codecov.io/gh/mpadge/typetracer)
<!-- badges: end -->

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r load injectr, include=FALSE}
devtools::load_all()
```

# typetracer

Trace function parameter types in R packages.

```{r}
library (typetracer)
```


## Example

Define a function, and use `inject_tracer` to inject parameter tracers used to
trace parameter types on each call. The following function includes an
additional parameter, `z`, which is left undefined here, along with `...` to
allow passing of arbitrary parameter values.

```{r inject}
f <- function (x, y, z, ...) {
    x * x + y * y
}
inject_tracer (f, .GlobalEnv)
```

Calls to the function, `f`, will then trace each parameter of the function. The
current demonstration-only version extracts values for `storage.type` and
`length`. These values can be accessed with the `load_traces` function, with
this example additionally demonstrating that the additional parameter, `z`, is
not traced when left undefined.

```{r trace1}
val <- f (x = 1:2, y = 3:4 + 0.)
load_traces ()
```

The following example demonstrates that additional parameters passed via `...`
are successfully traced. Note also the `clear_traces()` function which removes
all previous traces, ensuring that `load_traces()` will only return the most
recently generated traces.

```{r trace2}
clear_traces ()
val <- f (x = 1:2, y = 3:4 + 0., a = "blah", b = list (a = 1, b = "b"))
load_traces ()
```
